/**
 *
 *
 */

'use strict';

var FS = require('fs');
var PATH = require('path');


function Util() {}


/**
 * 打印各种功能消耗的时间
 * @param  {boolean} end 
 */
Util.prototype.log = function(end) {
	clearTimeout(this._i);
	if (end) {
		process.stdout.write((new Array(this._c).join('.')).yellow);
		process.stdout.write(' ' + (new Date().getTime() - (this.tstart || 0) + 'ms').green);
	} else {
		this._c = 25;
		this.tstart = new Date().getTime();
		process.stdout.write('\n  ¤ .'.yellow);
		this._i = setTimeout(function() {
			process.stdout.write('.'.yellow);
			if (this._c > 0) {
				clearTimeout(this._i);
			} else {
				this._c--;
			}
		}, 150);
	}
}


/**
 * 创建文件夹
 * @param  {string} dir 文件夹路径
 */
Util.prototype.mkdir = function(dir) {
	if (!FS.existsSync(dir)) {
		var _path = dir.split(/\/|\\/);
		if (_path.length === 1) {
			return;
		}
		_path.pop();
		this.mkdir(_path.join('/'));
		FS.mkdirSync(dir);
	}
}


module.exports = new Util();